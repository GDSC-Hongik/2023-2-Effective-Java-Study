# Item 23. 태그 달린 클래스보다는 클래스 계층구조를 활용하라

태그 달린 클래스란 하나의 클래스가 여러 가지의 의미를 가지며, 이 의미가 어떠한 구별자(태그)를 통해 구분되는 경우를 말한다. 당연히 객체지향 아는 사람이라면 뒷목 잡고 쓰러질만한 안티패턴이며 이걸 굳이 아이템으로 만들어도 되나? 싶을 정도로 말도 안되는 일이다. 하지만 코드를 보면 나름 그럴싸하게 보일 수도 있다.

책의 예제에서는 Figure 라는 클래스가 Rectangle의 필드에 해당하는 width, height를 가지고 있으면서 Circle의 필드에 해당하는 radius를 가지고 있다. 이렇게 Figure 클래스가 Rectangle과 Circle을 모두 상속받아서 구현하고, Figure 클래스에는 태그 역할을 하는 shape 필드가 존재한다. 이 필드는 Rectangle과 Circle의 구분자로 사용되며, 이 필드를 통해 Figure 클래스의 메서드들이 동작하게 된다.

가장 마음에 들지 않는 점은 하나의 의미로 확정되면 다른 의미에 소속된 필드들은 그냥 비어있는 상태로 남는다는 것이다. 필요없는 공간을 차지할 뿐더러, 이러한 만약 Shape가 Rectangle인데 Circle에 해당하는 필드에 엑세스하는 경우 에러를 NPE 등을 발생시킬 것이다. 만약 엑세스를 막는다면 이를 위한 코드가 필요할 것이고, 뭔 짓을 하든 불필요하게 삽질하는 일이 생긴다.

결론은 간단하다. 그냥 다른 의미를 가졌다면 다른 클래스로 나누는 것이다. '다른 의미를 가진다' 라는 것은 당연히 상황에 따라 달라지며 이 상황은 대개 프로그램의 요구사항에 따라 좌우된다. 이와 하나 소개하고 싶은 내용이 있는데, 우테코 미션 수행하면서 작성한 '유연한 정책을 설계하는 법' 중 배지 클래스 설계 과정에 대한 이야기다.

https://uwoobeat.vercel.app/uteco-pre-4

태그 달린 클래스에 대한 이야기는 아니지만 책에서 말하는 '계층구조로 분류' 할 때 고려해야 할 점에 대해서 언급하고 있다. 