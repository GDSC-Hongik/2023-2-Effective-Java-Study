### Item49 : 매개변수가 유효한지 검사하라

###### 매개변수 검사
일반 메서드 혹은 생성자에 넘어오는 매개변수는 검사를 해야 한다. 매개변수를 검사해야 해당 값을 사용해도 안전한지 체크할 수 있기 때문이다.
그리고 '오류는 가능한 빨리, 발생한 곳에서 잡는 것이 좋다'라는 원칙에도 잘 들어맞는다.  
만약 매개변수를 제대로 검사하지 않는다면
- 메서드 수행 도중 오류를 발생시킨다
- 잘못된 값임에도 메서드를 정상 실행시켜서 잘못된 반환값을 반환한다
- 잘못된 값을 이용하여 특정 객체를 초기화하여 나중에 해당 객체가 실제로 사용되는 시점에서야 잠재됐던 문제가 터진다

첫 번째 문제는 그나마 발생 시점에 바로 체크할 수 있지만 나머지 문제들은 사용 시점에서야 알 수 있으므로 오류의 발생 근원지와
실제 오류의 발생지간의 거리가 멀어지게 된다.

###### 예외의 문서화
개발자들은 당연히 자신의 코드에 매개변수 검사 로직을 넣어야 하고 매개변수 검사와 관련해서 발생할 수 있는 예외들에 대해서는 문서화하여 제공해야 한다(public, protected 메서드).


###### 매개변수 검사 시 사용할 수 있는 메서드
자바 7에는 java.util.Objects.requireNonNull 메서드가 추가됐는데 이 메서드를 통해 해당 객체가 null인지 바로 확인할 수 있으며
그때그때 원하는 메시지도 지정할 수 있어서 굉장히 유연하게 사용할 수 있다.
```java
public class Car {
    private String name;
    
    public Car(String name) {
        this.name = Objects.requireNonNull(name, "이름");
    }
}
```
위 경우처럼 반환값을 그대로 사용해도 되고 반환값 필요없이 그저 null 여부만 체크하고 싶을 때도 반환값 사용하지 않고 위 메서드를 사용해도 되니 굉장히 편하다.

private 메서드나 외부에 공개되지 않는 메서드의 매개변수 검사는 assert를 사용하면 된다. 이름에서 알 수 있듯이 확신을 한다는 뜻인데 예시 코드를 보면 이해할 수 있다.
```java
private static void sort(long a[], int offset, int length) {
    assert a != null;
    assert offset >= 0 && offset <= a.length;
    ...
}
```
private 메서드 같은 경우 다른 사용자들이 호출하는 메서드가 아닌 로직 구현 시 내부적으로만 사용되는 도우미 메서드 같은 느낌이므로 해당 매개변수의 상태를 메서드 작성자 스스로가 확신할 수 있어야 한다.

###### 매개변수 검사 예외적 경우
그렇다고 항상 모든 메서드의 시작 부분에 매개변수 검사 코드를 넣을 필요는 없다. 몇 가지 예외 사항이 있다.
1. 매개변수 검사하는 비용이 너무 큰 경우
2. 해당 매개변수를 이용하여 로직 실행 시 자연스럽게 검사가 진행되는 경우

검사 비용이 너무 큰 경우에는 무조건 메서드 바디 시작부에 하기 보다는 해당 메서드 로직이 실행되어야 함이 분명할 경우에 하는 식으로 대처할 수 있을 것 같다.

## 핵심 정리
    메서드, 생성자에서는 매개변수 검사를 웬만해선 실시하자. 그리고 해당 검사 시 발생할 수 있는 예외에 대해선
    문서화를 하자