# 전통적인 for 문보다는 for-each 문을 사용하라

```
💡 전통적인 for 문과 비교했을 때 for-each 문은 명료하고, 유연하고 버그를 예방해주며 성능 저하도 없다.
```

## 전통적인 for 문의 문제점

- 결국 진짜 필요한 건 원소들뿐
- 쓰이는 요소 종류가 늘어나면 오류 발생 가능성 ↑
    - 변수를 잘못 사용할 틈새가 넒어짐
    - 컴파일러가 잡아줄거라는 보장도 x
- 컬렉션 or 배열에 따라 코드 형태 달라짐

## for-each 문으로 해결하자

- **향상된** `for` 문
- 반복자와 인덱스 사용 x → 깔끔해진 코드, 오류 발생 가능성 ↓
- 어떤 컨테이너를 다루는지 신경 쓸 필요 x
- `Iterable` 인터페이스를 구현한 객체 → 무엇이든 순회 가능

```java
for (Element e : elements) {
	... // e로 무언가를 한다.
}
```

- 중첩 컬렉션 순회 시 이점

```java
List<Card> deck = new ArrayList<>();
for (Suit suit : suits)
	for (Rank rank : ranks)
		deck.add(new Card(suit, rank));
```

## for-each 문을 사용할 수 없는 상황

- 아래 세 가지 상황 중 하나에 속할 때는 일반적인 `for` 문을 사용하자

### 파괴적인 필터링

- 컬렉션 순회시 선택된 원소 제거하는 경우
- 반복자의 `remove` 호출 필요

### 변형

- 순회하면서 원소의 값 일부 혹은 전체를 교체해야하는 경우
- 리스트의 반복자나 배열의 인덱스 사용 필요

### 병렬 반복

- 여러 컬렉션을 병렬로 순회하는 경우
- 각각의 반복자와 인덱스 변수를 사용하여 제어 필요